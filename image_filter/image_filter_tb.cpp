
#include "image_filter.hpp"

int main()
{
	uint8_t rowAbove[IMAGE_ROWS] = {150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,175,175,175,175,175,175,175,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,75,75,75,75,75,75,75,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75};
	uint8_t rowCenter[IMAGE_ROWS] = {150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,175,175,175,175,175,175,175,175,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,75,75,75,75,75,75,75,75,150,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,100,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75};
	uint8_t rowBelow[IMAGE_ROWS] = {150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,175,175,175,175,175,175,175,175,175,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,75,75,75,75,75,75,75,75,150,150,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,100,100,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75};

	uint8_t expOutRow[IMAGE_ROWS] = {0,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,152,158,167,173,175,175,175,175,175,156,119,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,98,92,83,77,75,75,75,75,75,95,139,167,173,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,155,111,83,77,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75};

	uint8_t outputRow[IMAGE_ROWS];

	for(int i = 0; i < IMAGE_ROWS; i++){
		filterImage(rowAbove, rowCenter, rowBelow, outputRow);
	}

	uint8_t match = 1;

	for(int i = 0; i < IMAGE_ROWS; i++){
		if(expOutRow[i] != outputRow[i]){
			match = 0;
			printf("%d,", i);
			printf("%u,", expOutRow[i]);
			printf("%u,", outputRow[i]);

			printf("\n");
		}
	}

	if(match){
		printf("Test passed!");
	}
	else{
		printf("Test failed!");
	}

	return 0;
}
